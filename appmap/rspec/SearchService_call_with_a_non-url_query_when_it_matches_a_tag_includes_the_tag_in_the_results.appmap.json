{"version":"1.12.0","metadata":{"app":"mastodon","language":{"name":"ruby","engine":"ruby","version":"3.2.2"},"client":{"name":"appmap","url":"https://github.com/applandinc/appmap-ruby","version":"0.102.1"},"frameworks":[{"name":"rails","version":"7.1.1"},{"name":"rspec","version":"3.12.2"}],"git":{"repository":"https://github.com/sgrigson/mastodon.git","branch":"appmap-config","commit":"50d0a0445fe1bf0ac82032f1958ae8e614b2ebd3","status":["M .env.test","M .husky/pre-commit","M appmap/rspec/API_routes_Account_routes_routes_to_followers/appmap-findings.json","M appmap/rspec/API_routes_Account_routes_routes_to_search/appmap-findings.json","M appmap/rspec/API_routes_Account_routes_routes_to_statuses/appmap-findings.json","M appmap/rspec/API_routes_Credentials_routes_routes_to_update_credentials/appmap-findings.json","M appmap/rspec/API_routes_Credentials_routes_routes_to_verify_credentials/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_favourite/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_favourited_by/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_mute/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_reblog/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_reblogged_by/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_unfavourite/appmap-findings.json","M appmap/rspec/API_routes_Statuses_routes_routes_unmute/appmap-findings.json","M appmap/rspec/Apps_POST_api_v1_apps_with_a_too-long_name_returns_http_unprocessable_entity.appmap.json","M appmap/rspec/Apps_POST_api_v1_apps_with_a_too-long_redirect_uris_returns_http_unprocessable_entity.appmap.json","M appmap/rspec/Apps_POST_api_v1_apps_with_a_too-long_website_returns_http_unprocessable_entity.appmap.json","M appmap/rspec/Apps_POST_api_v1_apps_with_an_unsupported_scope_returns_http_unprocessable_entity.appmap.json","M appmap/rspec/Apps_POST_api_v1_apps_with_many_duplicate_scopes_only_saves_the_scope_once.appmap.json","M appmap/rspec/Apps_POST_api_v1_apps_with_valid_params_creates_an_OAuth_app.appmap.json","?? appmap/rspec/Apps_POST_api_v1_apps_with_a_too-long_name_returns_http_unprocessable_entity/","?? appmap/rspec/Apps_POST_api_v1_apps_with_a_too-long_redirect_uris_returns_http_unprocessable_entity/","?? appmap/rspec/Apps_POST_api_v1_apps_with_a_too-long_website_returns_http_unprocessable_entity/","?? appmap/rspec/Apps_POST_api_v1_apps_with_an_unsupported_scope_returns_http_unprocessable_entity/","?? appmap/rspec/Apps_POST_api_v1_apps_with_many_duplicate_scopes_only_saves_the_scope_once/","?? appmap/rspec/Apps_POST_api_v1_apps_with_valid_params_creates_an_OAuth_app/","?? appmap/rspec/Apps_POST_api_v1_apps_without_required_params_returns_http_unprocessable_entity/","?? appmap/rspec/Auth_ChallengesController_POST_create_with_correct_password_redirects_back/"],"git_last_annotated_tag":"0.1.2-14643-g50d0a0445fe1bf0ac82032f1958ae8e614b2ebd3","git_last_tag":"v4.2.0","git_commits_since_last_annotated_tag":0,"git_commits_since_last_tag":0},"name":"SearchService #call with a non-url query when it matches a tag includes the tag in the results","source_location":"spec/services/search_service_spec.rb","recorder":{"name":"rspec","type":"tests"},"test_status":"failed","test_failure":{"message":"(Tag(id: integer, name: string, created_at: datetime, updated_at: datetime, usable: boolean, trendable: boolean, listable: boolean, reviewed_at: datetime, requested_review_at: datetime, last_status_at: datetime, max_score: float, max_score_at: datetime, display_name: string) (class)).search_for(\"tag\", 10, 0, {:exclude_unreviewed=>nil})\n    expected: 1 time with arguments: (\"tag\", 10, 0, {:exclude_unreviewed=>nil})\n    received: 0 times","location":"spec/services/search_service_spec.rb:83"},"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"(Tag(id: integer, name: string, created_at: datetime, updated_at: datetime, usable: boolean, trendab (...339 more characters)"}},"classMap":[{"name":"lib/chewy","type":"package","children":[{"name":"Chewy","type":"class","children":[{"name":"SettingsExtensions","type":"class","children":[{"name":"enabled?","type":"function","location":"lib/chewy/settings_extensions.rb:5","static":true}]},{"name":"IndexExtensions","type":"class","children":[{"name":"index_preset","type":"function","location":"lib/chewy/index_extensions.rb:5","static":true}]}]}]},{"name":"logger","type":"package","children":[{"name":"Logger","type":"class","children":[{"name":"LogDevice","type":"class","children":[{"name":"write","type":"function","location":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb:31","static":false,"labels":["log"]}]}]}]},{"name":"app","type":"package","children":[{"name":"models","type":"package","children":[{"name":"Tag","type":"class","children":[{"name":"normalize","type":"function","location":"app/models/tag.rb:156","static":true},{"name":"find_normalized","type":"function","location":"app/models/tag.rb:138","static":true},{"name":"matching_name","type":"function","location":"app/models/tag.rb:146","static":true}]}]},{"name":"lib","type":"package","children":[{"name":"HashtagNormalizer","type":"class","children":[{"name":"normalize","type":"function","location":"app/lib/hashtag_normalizer.rb:4","static":false}]},{"name":"ASCIIFolding","type":"class","children":[{"name":"fold","type":"function","location":"app/lib/ascii_folding.rb:7","static":false}]}]}]}],"events":[{"id":39522,"event":"call","thread_id":9960,"defined_class":"Chewy::SettingsExtensions","method_id":"enabled?","path":"lib/chewy/settings_extensions.rb","lineno":5,"static":true,"parameters":[],"receiver":{"class":"Module","object_id":199500,"value":"Chewy"}},{"id":39523,"event":"return","thread_id":9960,"parent_id":39522,"elapsed":1.1476979125291109e-05,"elapsed_instrumentation":0.00017277896404266357,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":39524,"event":"call","thread_id":9960,"defined_class":"Chewy::SettingsExtensions","method_id":"enabled?","path":"lib/chewy/settings_extensions.rb","lineno":5,"static":true,"parameters":[],"receiver":{"class":"Module","object_id":199500,"value":"Chewy"}},{"id":39525,"event":"return","thread_id":9960,"parent_id":39524,"elapsed":1.2360978871583939e-05,"elapsed_instrumentation":0.0001712399534881115,"return_value":{"class":"TrueClass","value":"true","object_id":20}},{"id":39526,"event":"call","thread_id":9960,"defined_class":"Chewy::IndexExtensions","method_id":"index_preset","path":"lib/chewy/index_extensions.rb","lineno":5,"static":true,"parameters":[{"name":"base_options","class":"Hash","object_id":511980,"value":"{:refresh_interval=>30s}","kind":"opt","size":1}],"receiver":{"class":"Class","object_id":512000,"value":"TagsIndex"}},{"id":39527,"event":"return","thread_id":9960,"parent_id":39526,"elapsed":1.3698008842766285e-05,"elapsed_instrumentation":0.0006325970171019435,"return_value":{"class":"Hash","value":"{:refresh_interval=>30s, :number_of_replicas=>0}","object_id":512020,"size":2}},{"id":39528,"event":"call","thread_id":9960,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":512060,"value":"\u001b[33m[httplog] POST http://es:9200/mastodon_test_tags/_search completed with status code 404 in 0.02 (...17 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":14180,"value":"#<Logger::LogDevice:0x00007f5e1ce65ab0>"}},{"id":39529,"event":"return","thread_id":9960,"parent_id":39528,"elapsed":0.0009635049500502646,"elapsed_instrumentation":0.00027795706409960985,"return_value":{"class":"Integer","value":"117","object_id":235}},{"id":39530,"event":"call","thread_id":9960,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":512080,"value":"  \u001b[1m\u001b[32mTagsIndex Search (29.1ms)\u001b[0m {:index=>[\"mastodon_test_tags\"], :body=>{:size=>10, :from=> (...340 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":14180,"value":"#<Logger::LogDevice:0x00007f5e1ce65ab0>"}},{"id":39531,"event":"return","thread_id":9960,"parent_id":39530,"elapsed":0.001204553002025932,"elapsed_instrumentation":0.000513348903041333,"return_value":{"class":"Integer","value":"440","object_id":881}},{"id":39532,"event":"call","thread_id":9960,"defined_class":"Tag","method_id":"normalize","path":"app/models/tag.rb","lineno":156,"static":true,"parameters":[{"name":"str","class":"String","object_id":512100,"value":"tag","kind":"req"}],"receiver":{"class":"Class","object_id":348300,"value":"Tag"}},{"id":39533,"event":"call","thread_id":9960,"defined_class":"HashtagNormalizer","method_id":"normalize","path":"app/lib/hashtag_normalizer.rb","lineno":4,"static":false,"parameters":[{"name":"str","class":"String","object_id":512100,"value":"tag","kind":"req"}],"receiver":{"class":"HashtagNormalizer","object_id":512140,"value":"#<HashtagNormalizer:0x00007f5e121353b8>"}},{"id":39534,"event":"call","thread_id":9960,"defined_class":"ASCIIFolding","method_id":"fold","path":"app/lib/ascii_folding.rb","lineno":7,"static":false,"parameters":[{"name":"str","class":"String","object_id":512180,"value":"tag","kind":"req"}],"receiver":{"class":"ASCIIFolding","object_id":512200,"value":"#<ASCIIFolding:0x00007f5e1209f390>"}},{"id":39535,"event":"return","thread_id":9960,"parent_id":39534,"elapsed":6.219098577275872e-05,"elapsed_instrumentation":0.0005145809845998883,"return_value":{"class":"String","value":"tag","object_id":512220}},{"id":39536,"event":"return","thread_id":9960,"parent_id":39533,"elapsed":0.01167917501879856,"elapsed_instrumentation":0.00033056497341021895,"return_value":{"class":"String","value":"tag","object_id":512240}},{"id":39537,"event":"return","thread_id":9960,"parent_id":39532,"elapsed":0.0221422630129382,"elapsed_instrumentation":0.0005674430285580456,"return_value":{"class":"String","value":"tag","object_id":512240}},{"id":39538,"event":"call","thread_id":9960,"defined_class":"Tag","method_id":"find_normalized","path":"app/models/tag.rb","lineno":138,"static":true,"parameters":[{"name":"name","class":"String","object_id":512240,"value":"tag","kind":"req"}],"receiver":{"class":"Class","object_id":348300,"value":"Tag"}},{"id":39539,"event":"call","thread_id":9960,"defined_class":"Tag","method_id":"matching_name","path":"app/models/tag.rb","lineno":146,"static":true,"parameters":[{"name":"name_or_names","class":"String","object_id":512240,"value":"tag","kind":"req"}],"receiver":{"class":"Class","object_id":348300,"value":"Tag"}},{"id":39540,"event":"call","thread_id":9960,"defined_class":"Tag","method_id":"normalize","path":"app/models/tag.rb","lineno":156,"static":true,"parameters":[{"name":"str","class":"String","object_id":512240,"value":"tag","kind":"req"}],"receiver":{"class":"Class","object_id":348300,"value":"Tag"}},{"id":39541,"event":"call","thread_id":9960,"defined_class":"HashtagNormalizer","method_id":"normalize","path":"app/lib/hashtag_normalizer.rb","lineno":4,"static":false,"parameters":[{"name":"str","class":"String","object_id":512240,"value":"tag","kind":"req"}],"receiver":{"class":"HashtagNormalizer","object_id":512260,"value":"#<HashtagNormalizer:0x00007f5e12096f60>"}},{"id":39542,"event":"call","thread_id":9960,"defined_class":"ASCIIFolding","method_id":"fold","path":"app/lib/ascii_folding.rb","lineno":7,"static":false,"parameters":[{"name":"str","class":"String","object_id":512280,"value":"tag","kind":"req"}],"receiver":{"class":"ASCIIFolding","object_id":512300,"value":"#<ASCIIFolding:0x00007f5e12096128>"}},{"id":39543,"event":"return","thread_id":9960,"parent_id":39542,"elapsed":5.4126023314893246e-05,"elapsed_instrumentation":0.00024083198513835669,"return_value":{"class":"String","value":"tag","object_id":512320}},{"id":39544,"event":"return","thread_id":9960,"parent_id":39541,"elapsed":0.00039869401371106505,"elapsed_instrumentation":0.00014163192827254534,"return_value":{"class":"String","value":"tag","object_id":512340}},{"id":39545,"event":"return","thread_id":9960,"parent_id":39540,"elapsed":0.0005719500477425754,"elapsed_instrumentation":0.0001533969771116972,"return_value":{"class":"String","value":"tag","object_id":512340}},{"id":39546,"event":"return","thread_id":9960,"parent_id":39539,"elapsed":0.0009134970023296773,"elapsed_instrumentation":0.0005652170511893928,"return_value":{"class":"ActiveRecord::Relation","value":"#<Tag::ActiveRecord_Relation:0x00007f5e0dd83020>","object_id":512360}},{"id":39547,"event":"call","thread_id":9960,"sql_query":{"sql":"SELECT \"tags\".* FROM \"tags\" WHERE LOWER(\"tags\".\"name\") = LOWER('tag') ORDER BY \"tags\".\"id\" ASC LIMIT $1","database_type":"postgres"}},{"id":39548,"event":"return","thread_id":9960,"parent_id":39547,"elapsed":0.001713302,"elapsed_instrumentation":0.00017341203056275845},{"id":39549,"event":"call","thread_id":9960,"defined_class":"Logger::LogDevice","method_id":"write","path":"/usr/local/lib/ruby/3.2.0/logger/log_device.rb","lineno":31,"static":false,"parameters":[{"name":"message","class":"String","object_id":512380,"value":"  \u001b[1m\u001b[36mTag Load (1.9ms)\u001b[0m  \u001b[1m\u001b[34mSELECT \"tags\".* FROM \"tags\" WHERE LOWER(\"tags\".\"name\") = L (...66 more characters)","kind":"req"}],"receiver":{"class":"Logger::LogDevice","object_id":14180,"value":"#<Logger::LogDevice:0x00007f5e1ce65ab0>"}},{"id":39550,"event":"return","thread_id":9960,"parent_id":39549,"elapsed":0.0010790139785967767,"elapsed_instrumentation":0.0004883040091954172,"return_value":{"class":"Integer","value":"166","object_id":333}},{"id":39551,"event":"return","thread_id":9960,"parent_id":39538,"elapsed":0.007697514025494456,"elapsed_instrumentation":0.0002116599353030324}]}